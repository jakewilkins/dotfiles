#!/usr/bin/env fish

# Bring in all of our submodule dependencies
git submodule init; and git submodule update

# Set the terminal and Neovim theme
#
# The functions aren't defined here because they normally require interactive mode.
# https://github.com/chriskempson/base16-shell/blob/ce8e1e540367ea83cc3e01eec7b2a11783b3f9e1/profile_helper.fish#L28-L31

set THEME "base16-ocean"
set SCRIPT $DOTFILES/config/base16-shell/scripts/$THEME.sh

sh $SCRIPT
ln -sf $SCRIPT ~/.base16_theme

set -gx BASE16_THEME (string split -m 1 '-' $THEME)[2]
echo -e "if !exists('g:colors_name') || g:colors_name != '$THEME'\n  colorscheme $THEME\nendif" >  ~/.vimrc_background

# Install packages from fish_plugins
fisher update

# Codespaces has a .gitconfig already setup, so just include
# all of our files instead of messing around.
if set -q CODESPACES
	git config --global include.path ~/.config/git/config
end
