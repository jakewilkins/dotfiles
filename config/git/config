# vim:ft=gitconfig

[alias]
	br  = branch
	co  = checkout
	cor = "!git for-each-ref --sort=-committerdate --format='%(refname:short) (%(committerdate:relative))' refs/heads | fzf --reverse --nth=1 --preview 'git log --patch --color {1}...{1}~5' | awk '{print $1}' | xargs git checkout"
	cp  = cherry-pick
	cs  = commit -S
	st  = status -sb
	up  = !sh -c 'git pull --rebase --prune && git log --pretty=format:\"%Cred%ae %Creset- %C(yellow)%s %Creset(%ar)\" HEAD@{1}..'
  down = "! f() { branch=`git rev-parse --abbrev-ref HEAD`; git fetch origin $branch ; if [[ $1 == 'rebase' ]]; then git stash; git rebase origin/$branch; git stash pop; else  git merge origin/$branch --ff-only; fi }; f"

[color]
	ui = true

[color "diff"]
	meta = yellow
	frag = magenta bold
	commit = yellow bold
	old = red bold
	new = green bold
	whitespace = red reverse

[color "diff-highlight"]
	oldNormal = red bold
	oldHighlight = red bold 52
	newNormal = green bold
	newHighlight = green bold 22

[commit]
	verbose = true

[core]
	editor = nvim
	excludesfile = ~/.config/git/ignore
	#pager = diff-so-fancy | less --tabs=4 -RFX
	whitespace = trailing-space,space-before-tab,indent-with-non-tab

[diff]
	colorMoved = default

[difftool]
	prompt = false

[filter "media"]
	clean = git-media-clean %f
	smudge = git-media-smudge %f

[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true

[gc]
	auto = 0

[hub]
	protocol = https

[include]
	path = ~/.config/git/personal

[includeIf "gitdir:/Users"]
	path = ~/.config/git/config-macos

# [includeIf "gitdir:/home"]
# 	path = ~/.gitconfig-linux

[init]
	defaultBranch = main

[interactive]
	#diffFilter = diff-so-fancy --patch

[push]
	default = current

[protocol]
	version = 2
